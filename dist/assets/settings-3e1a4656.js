var c=Object.defineProperty;var g=(s,t,e)=>t in s?c(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var i=(s,t,e)=>(g(s,typeof t!="symbol"?t+"":t,e),e);const d="chess-com-insights",u="2.2.1",p="module",h={type:"git",url:"https://github.com/thieleju/chess-com-insights"},m={prebuild:'prettier --write "src/**/*.ts" "tests/*.ts"',dev:"vite",build:"vue-tsc --noEmit && vite build",preview:"vite preview",test:"tsc && ts-mocha","test:junit":"tsc && ts-mocha --reporter mocha-junit-reporter --reporter-options mochaFile=tests/results.xml",cover:"npx c8 npm run test && npx c8 report --reporter html"},v={"@mdi/font":"7.2.96",luxon:"^3.4.0","roboto-fontface":"*",vue:"^3.2.0",vuetify:"^3.3.12",webfontloader:"^1.0.0"},S={"@crxjs/vite-plugin":"^2.0.0-beta.18","@types/chai":"^4.3.5","@types/chrome":"^0.0.243","@types/expect":"^24.3.0","@types/jsdom":"^21.1.1","@types/jsdom-global":"^3.0.4","@types/luxon":"^3.3.1","@types/mocha":"^10.0.1","@types/node":"^20.5.0","@types/sinon":"^10.0.16","@types/webfontloader":"^1.6.35","@vitejs/plugin-vue":"^4.2.3",c8:"^8.0.1",chai:"^4.3.7",jsdom:"^22.1.0","jsdom-global":"^3.0.2",mocha:"^10.2.0","mocha-junit-reporter":"^2.2.1",prettier:"^3.0.1",sinon:"^15.2.0","source-map-support":"^0.5.21","ts-mocha":"^10.0.0","ts-node":"^10.9.1",typescript:"^5.0.2",vite:"^4.4.9","vite-plugin-vuetify":"^1.0.0","vue-tsc":"^1.8.8"},O={name:d,private:!0,version:u,type:p,repository:h,scripts:m,dependencies:v,devDependencies:S};class x{constructor(t,e){i(this,"settings");i(this,"storage");i(this,"settingsJSON");this.storage=t,this.settingsJSON=e}async getSettingsFromStorage(){const t=await this.storage.getStoredSettings(),e=this.settingsJSON.defaultSettings;return!t||!this.validateSettings(t)?(await this.saveSettingsToStorage(e),e):t}async saveSettingsToStorage(t){await this.storage.saveSettings(t),this.settings=t}validateSettings(t){const e=this.settingsJSON.validTimeIntervals,r=this.settingsJSON.validGameModes,a=o=>typeof o=="boolean",n=o=>r.includes(o),l=o=>e.includes(o);return![!a(t.popup_darkmode),!a(t.show_stats),!a(t.show_accuracy),!a(t.hide_own_stats),!Array.isArray(t.game_modes)||!t.game_modes.every(n),!l(t.time_interval),!a(t.color_highlighting)].some(o=>o)}async getSettings(t=!1){return(!this.settings||t)&&(this.settings=await this.getSettingsFromStorage()),this.settings}getSettingsJSON(){return this.settingsJSON}}class D{async getStoredSettings(){return chrome.storage.local.get(["settings"]).then(t=>t.settings)}async saveSettings(t){return chrome.storage.local.set({settings:t})}}const y=5,_=600,b=1700,f={target_name:"user-tagline-username",target_top:"board-layout-top",target_bottom:"board-layout-bottom"},w={wins:"#6b9438",loses:"#bc403a",draws:"#b38235"},E={game_modes:["blitz","rapid"],time_interval:"last 12 hours",hide_own_stats:!1,show_accuracy:!0,show_stats:!0,popup_darkmode:!0,color_highlighting:!1},T=["blitz","rapid","bullet","daily"],j=["last hour","last 6 hours","last 12 hours","last day","last 3 days","last week","this month"],A={"last hour":3600,"last 6 hours":21600,"last 12 hours":43200,"last day":86400,"last 3 days":259200,"last week":604800},R={FETCH_MAX_RETRIES:y,FETCH_RETRY_DELAY:_,LOAD_DELAY:b,query_selectors:f,colors:w,defaultSettings:E,validGameModes:T,validTimeIntervals:j,timeIntervalsMS:A};export{D as C,x as S,O as p,h as r,R as s,u as v};
